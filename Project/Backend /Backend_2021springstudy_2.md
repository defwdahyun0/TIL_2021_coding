## localhost

컴퓨터 내에서 웹서버(Apache,ngnix..)를 동작시키면 127.0.0.1이라는 ip 주소에서 바로 확인해볼 수 있다.
이 때 localhost가 동작하는 것인데, 나의 데스크탑에서만 확인해볼 수 있다. 
이 때, firefox/Chrome 등은 client이다.

client가 어떻게 서버를 보여줄 수 있는 것일까? client에서는 다른 서버를 호출하는 것과 같은 방식으로 localhost에 서버 요청을 보낸 것이다.

내 컴퓨터 안에서만 실행되는 이유는 내부망안에서 실행됐기 때문이다.

예를 들자면, phpinfo.php 호출했을 때 다운로드가 되는 경우가 있다. 그 이유는 apache랑 php 연동할 때 오류가 있어서이다. 즉, apache에서 확장자가 php로 끝나는 파일을 읽기 위해서는 아파치와 php의 연결이 필수적인데, 이 과정이 잘 이루어지지 않으면 해석을 못하고 다운로드만을 하는 것이다. 

127.0.0.1를 했을 때 보이는 it works 화면은 default 파일인 index.html을 보여주는 것이다.

로컬 서버만 있어도 html 보여주기나 파일 다운로드 같은 간단한 동작은 가능하다.

## 서버
### protocol

식당 예시를 다시 들 수 있다. (예시가 동반되면 이해가 수월한 것 같다.)

식당마다 주문 방식이 다르다. 스타벅스는 손님이 말로 직접 주문하고, 김밥천국은 주문표를 이용하고, 카페는 진동벨을 사용한다. (규칙, 전달매체)

이러한 규칙이 프로토콜이다. 프로토콜들마다 규칙을 명명해서 규칙대로 소통한다. 그 예시로 http, mysql, ssh 등을 들 수 있다.

주로 웹서버인 http로 통신을 한다. http가 주고 받는 데이터의 외향은 패킷이며, 패킷은 헤더와 바디로 구성되어 있다.

### ip

식당에 가기 위해서는 더 필요한 정보가 있다.

바로, 구주소, 신주소, 위도, 경도와 같은 위치정보이다. 주소값.

이러한 값을 ip주소라고 한다.

### Port(number)

식당에 어느 문으로 들어가야 할까? 일반 사용자, 자동차, 스태프는 모두 다른 문으로 들어가야 할 것이다.
이러한 문을 포트에 비유할 수 있다. 주문 방법에 따라 내부로 들어갈 수 있는 문이 다르다. 이는 프로토콜마다 특정한 포트 번호를 갖고 있음을 의미한다.

* http : 80
* https : 443
* ftp : 21
* sftp : 22
* mysql : 3306

참고로 포트 번호는 고정된 숫자가 아니기 때문에 임의로 부여할 수 있다. 그러나 위에서 명시한 포트 번호는 관례적으로 자주 사용함을 알고 있어야 한다.

#### 인바운드 규칙
만약 모든 문이 열려있다면 누군가가 물건을 훔칠 확률이 높아진다. 따라서 특정 포트를 제외하고는 외부에서 들어올 수 없도록 해야 한다.

#### 아웃바운드 규칙
직원은 자유롭게 밖으로 나가야하며 이러한 포트는 열려 있어야 한다.

### Daemon
이렇게 문을 열고 들어가면 고객을 맞이해주는 직원, Daemon이 있다. 데몬은 백그라운드 프로세스의 일종으로 요청이 발생했을 때 이에 적절히 대응한다. httpd나 mysqld 명령어에서, 이 때 끝에 붙은 d 가 데몬을 뜻한다.

### 서버의 역할

서버는 포트를 여닫으며 누가 내 서버에 들어오는지 확인해야 한다. 이는 보안적으로도 중요한 일이다.

웹 서버는 맞는 포트로 안내하며 포트를 리스닝해야 한다. 

왜 웹 서버을 사용할까? 웹 상에서 띄워져 있는 상태로 통신을 해야하기 때문이다. 서버는 후발적인 개념이다. 데이터 등을 보관하는 공간이다. 클라이언트와 소통하기 위해 api를 만들 것인데 http/패킷으로 통신할 것이다. WAS를 사용하기도 하는데, WAS도 web application server의 약자로 결국 웹서버이다.

## 포트포워딩

통신사 랜선을 꽂은 공유기는 고정 IP 주소를 부여받게 된다. 그리고 공유기에 연결된 다수의 서버도 IP를 할당받는다. 이렇게 공유기가 가진 IP를 외부 IP, 공유기에 연결된 네트워크 기기들이 갖는 IP를 내부 IP라고 한다.
핸드폰으로 특정한 서버에 접속하고 싶다고 가정하자. 

인터넷 창을 열어 위에서 공유기의 고유 아이피 주소를 입력하면 당연히 들어가지지 않을 것이다. 이와 동일한 내부 IP를 다른 공유기에서도 할당하고 있을 수 있기 때문이다.

포트포워딩을 통해서, 클라이언트와 서버를 분리하여 외부에서 서버로의 접속을 가능케 할 수 있다. 즉, 컴퓨터를 서버화해서 로컬호스트가 서버로 보이게끔 해주는 것이다. 

이 때, 다른 와이파이 혹은 lte로 연결한 핸드폰으로 로컬호스트 서버에 접속하려고 할 때 어느 기기에서 서버를 만들었는지 알려면 외부 ip와 내부 ip 그리고 포트번호를 알아야한다. 

내부 ip를 알기 위해서는 가장 끝자리의 숫자를 보면 된다. 연결된 순서대로 숫자가 부여된다. iptime의 경우 192.168.0.1의 ip주소가 부여된다. 이 때 기기가 연결되면 192.168.0.2, 192.168.0.3, 192.168.0.4 ...와 같이 숫자가 부여된다. 

nslookup 명령어를 치면 여러 아이피 주소가 뜰 것이다. 이는 클러스터링 개념으로 서버를 분배해놓은 것이다.

## 클라우드 컴퓨팅

서버 구축은 아래 두 가지 방식으로 가능하다.

* 온프레미스: 하나의 컴퓨터를 구매해서 하는 방식. 외부인의 접근이 없다. 보안 좋음. 디테일한 구성
* 클라우드: 호텔방, 보안 임대. 서버 백업, 보안, db, 머신러닝 등 여러 기능 제공

대기업의 경우에는 두 개를 모두 혼용한다.

우리는 클라우드 컴퓨팅을 통해 서버 공간을 임대해서 원하는 정보를 저장할 수 있다. 접속량에 따라 요금을 내는 시스템이다. 클라우드의 예시는 aws, 네이버클라우드, 구글클라우드 등이 있다.

aws에서는 ec2 서비스를 통해 인스턴스로 서버를 임대할 수 있다.

sftp, ssh에서 주로 파일을 주고 받으며 컴퓨터 환경을 gpu로 소통할 수 있다. mac의 경우 cyberduck를 사용할 수 있다. 경우에 따라서는 보안 설정도 해야한다.